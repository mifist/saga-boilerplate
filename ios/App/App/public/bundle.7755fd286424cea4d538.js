"use strict";!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(self,(()=>(self.webpackChunkreact_boilerplate=self.webpackChunkreact_boilerplate||[]).push([[179],{55718:(e,t,r)=>{r.r(t);r(61691),r(40293);var n=r(78709),a=r(57769),o=r(94561),c=r(39245),u=r(70982),i=r.n(u),s=(r(12327),r(65641)),l=r(78536);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=n.createContext({});const v=function(e){var t=e.children,r=(0,n.useState)({}),a=(0,l.Z)(r,2),o=a[0],c=a[1];return n.createElement(d.Provider,{value:{setCookie:function(e,t){var r=f({path:"/"},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});document.cookie="".concat(e,"=").concat(t,"; ").concat(Object.entries(r).map((function(e){var t=(0,l.Z)(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(n)})).join("; ")),c(f(f({},o),{},(0,s.Z)({},e,t)))},getCookie:function(e){if(!o[e]){var t=document.cookie.split("; ").find((function(t){return t.startsWith("".concat(e,"="))}));t&&c(f(f({},o),{},(0,s.Z)({},e,t.split("=")[1])))}return o[e]||""}}},t)};var h,g,b,m,w,O,y,k,x=r(81043),j=r(82247),P=r.n(j),S=r(27406),Z=(r(13476),r(74437));h=(0,x.Z)(P().mark((function e(){var t;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.C.get();case 2:return t=e.sent,e.abrupt("return",t.count);case 4:case"end":return e.stop()}}),e)}))),g=(0,x.Z)(P().mark((function e(t){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.C.set({count:t});case 2:case"end":return e.stop()}}),e)}))),b=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.C.increase();case 2:case"end":return e.stop()}}),e)}))),m=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.C.decrease();case 2:case"end":return e.stop()}}),e)}))),w=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.C.clear();case 2:case"end":return e.stop()}}),e)}))),O=(0,x.Z)(P().mark((function e(){var t;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.C.isSupported();case 2:return t=e.sent,e.abrupt("return",t.isSupported);case 4:case"end":return e.stop()}}),e)}))),y=(0,x.Z)(P().mark((function e(){var t;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.C.checkPermissions();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),k=(0,x.Z)(P().mark((function e(){var t;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.C.requestPermissions();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));r(61622);var E=r(24088);(function(){var e=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.ej.impact({style:E.y$.Medium});case 2:case"end":return e.stop()}}),e)})))})(),function(){var e=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.ej.impact({style:E.y$.Light});case 2:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.ej.vibrate();case 2:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.ej.selectionStart();case 2:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.ej.selectionChanged();case 2:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.ej.selectionEnd();case 2:case"end":return e.stop()}}),e)})))}();var C=r(87134),A=r(12988),R=r(61316),D=r(11429),I=r(8832),B=r(1173),U=r(34480),L=r(78591),T=r(2335),N=r(95528),_="@@saga-injector/daemon",V="@@saga-injector/once-till-unmount",F="sagaboilerplate",M=("http://".concat("192.168.1.100".toString(),":8080/api/"),"https://".concat(F,"-dev.herokuapp.com/api/"),"https://".concat(F,".herokuapp.com/api/")),J="https://".concat(F,"-app.herokuapp.com/api/"),q=("https://".concat(F,".com/api/"),"https://beta.".concat(F,".com/"),"https://app.".concat(F,".com/"),"https://apps.apple.com/fr/app/".concat(F,"/id1588569081"),"https://play.google.com/store/apps/details?id=com.".concat(F,".app"),"https://storage.googleapis.com/".concat(F,"-dev"),"web"==D.Capacitor.platform),z=(D.Capacitor.platform,D.Capacitor.platform,function(){var e=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.A.getInfo().then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.g.getInfo().then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),W=(function(){var e=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.g.getState().then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.A.getLanguageCode().then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}(),function(){var e="http://localhost:8080/api/";return q&&(e=window.location.origin.includes("app.sagaboilerplate.com")?J:M),q||(e=J),console.log("apiURL: ",e,"https://sagaboilerplate-app.herokuapp.com/api/"),"https://sagaboilerplate-app.herokuapp.com/api/"}),G=function(){var e=(0,x.Z)(P().mark((function e(){var t,r,n;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.S.canDeviceVoiceRecord();case 2:return t=e.sent,console.debug("canRecord",JSON.stringify(t)),e.next=6,N.S.hasAudioRecordingPermission();case 6:if(r=e.sent,console.debug("hasRecordPermission",JSON.stringify(r)),n=null,null==t||!t.value||null!=r&&r.value){e.next=14;break}return e.next=12,N.S.requestAudioRecordingPermission();case 12:n=e.sent,console.debug("hasAnswerPermission",JSON.stringify(n));case 14:return e.abrupt("return",{canRecord:null==t?void 0:t.value,hasRecordPermission:null==r?void 0:r.value,hasAnswerPermission:n});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(function(){var e=(0,x.Z)(P().mark((function e(){var t,r,n;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={quality:90,resultType:B.dk.Uri},e.next=3,B.V1.getPhoto(t);case 3:return r=e.sent,n=r.webPath,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))})(),function(){var e=(0,x.Z)(P().mark((function e(t,r){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!r){e.next=23;break}return e.prev=1,e.next=4,T.A.open({url:t});case 4:return e.next=6,L.g.isInstalled({id:r});case 6:if(!e.sent){e.next=15;break}return alert("Update installed successfully. Restarting the app..."),e.next=11,U.A.getInfo();case 11:"ios"===e.sent.platform?alert("On iOS, you'll need to manually restart the app after the update is installed"):L.g.exitApp(),e.next=16;break;case 15:alert("Failed to install update");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.error(e.t0);case 21:e.next=25;break;case 23:console.error("Error in downloadAndInstallApk: apkUrl or appId is Empty!!"),console.debug("Error in downloadAndInstallApk: apkUrl or appId is Empty!!");case 25:case"end":return e.stop()}}),e,null,[[1,18]])})))}();function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}S.Z.defaults.baseURL=W();!function(){var e=(0,x.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.O.notifyAppReady();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}();var K=function(){var e=(0,x.Z)(P().mark((function e(){var t,r,n,a,o,c,u,i,s,l,p,f,d;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return t=e.t0,t.id,r=t.build,n=t.version,e.next=9,C.O.current();case 9:return a=e.sent,o=a.bundle.version,c="builtin"!=o?o:n,u="builtin"!=o?Number(c.replaceAll(".","")):r,e.next=15,S.Z.post("auth/control/".concat(n),{isApp:!0}).then((function(e){return e.data}));case 15:return i=e.sent,s=n,l=r,p=n,f=r,u<(null==i?void 0:i.currentBuild)?(l=u,s=c,p=null==i?void 0:i.currentVersion,f=null==i?void 0:i.currentBuild):u>=(null==i?void 0:i.currentBuild)&&(r==u?(l=r,s=n,p=null==i?void 0:i.currentVersion,f=null==i?void 0:i.currentBuild):r<u&&(l=u,s=c,p=null==i?void 0:i.currentVersion,f=null==i?void 0:i.currentBuild)),d={version:s,build:l,newBuild:f,newVersion:p},e.abrupt("return",d);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,x.Z)(P().mark((function e(){var t,r,n,a;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(t=e.t0,t.id,t.build,!(r=t.version)){e.next=23;break}return e.next=10,K();case 10:return n=e.sent,e.next=13,S.Z.post("auth/control/".concat(r),{isApp:!0}).then((function(e){return e.data}));case 13:if(a=e.sent,!((null==n?void 0:n.build)<(null==a?void 0:a.currentBuild))){e.next=19;break}return e.next=17,X({url:null==a?void 0:a.url,version:null==a?void 0:a.currentVersion});case 17:e.next=20;break;case 19:R.F.show({text:"The current version is up to date",duration:"short"});case 20:return e.abrupt("return",$($({},a),t));case 23:return R.F.show({text:"The current version is up to date",duration:"short"}),e.abrupt("return",t);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,x.Z)(P().mark((function e(t){var r,n,a;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.version,e.next=3,C.O.isAutoUpdateEnabled().then((function(e){return null==e?void 0:e.enabled}));case 3:if(!e.sent){e.next=16;break}if(!r){e.next=13;break}return e.next=8,A.V.confirm({title:"Confirm",message:"A new update is available, do you want to download it now?"});case 8:a=e.sent,a.value&&C.O.download({url:r,version:n}).then((function(e){C.O.set(e)})),e.next=14;break;case 13:R.F.show({text:"File download error, please try again later.",duration:"short"});case 14:e.next=17;break;case 16:console.debug("run checkAndUpdate Error: isAutoUpdateEnabled is disabled");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(function(){var e=(0,x.Z)(P().mark((function e(t){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R.F.show({text:"File download error, please try again later.",duration:"short"});case 1:case"end":return e.stop()}}),e)})))})(),function(){var e=(0,x.Z)(P().mark((function e(t){var r,n;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:(null==(n=e.sent)?void 0:n.build)<(null===(r=result)||void 0===r?void 0:r.newBuild)&&Q();case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,x.Z)(P().mark((function e(t){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,x.Z)(P().mark((function e(t){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.O.delete();case 1:case"end":return e.stop()}}),e)})))}();var Y=r(12182),ee=W();S.Z.defaults.baseURL=ee;var te=D.Capacitor.isPluginAvailable("PushNotifications"),re=function(){var e=(0,x.Z)(P().mark((function e(t){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.V.requestPermissions();case 2:return e.next=4,I.V.register();case 4:Y.i.setAutoInit({enabled:!0}).then((function(){return console.log("Auto init enabled")})),Y.i.isAutoInitEnabled().then((function(e){console.log("Auto init is "+(e.enabled?"enabled":"disabled"))}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const ne={isPushNotificationsAvailable:te,registerPush:re};S.Z.defaults.baseURL=W();var ae={single:function(e){return!!e&&"users/".concat(e)},childrenList:function(e){return!!e&&"users/".concat(e,"/children")}},oe={auth:{checkAppVersion:function(e,t){return!!e&&S.Z.post("auth/control/".concat(e),{isApp:t}).then((function(e){return e.data}))},forgotPassword:function(e){return!!e&&S.Z.post("auth/forgot",e).then((function(e){return e.data}))},resetPassword:function(e){return!!e&&S.Z.post("auth/reset",e).then((function(e){return e.data}))},confirmProfile:function(e){return!!e&&S.Z.post("auth/confirm",e).then((function(e){return e.data}))},resendConfirmProfile:function(e){return!!e&&S.Z.post("auth/confirm/resend",e).then((function(e){return e.data}))},signUp:function(e){return!!e&&S.Z.post("auth/signup",e).then((function(e){return e.data}))}},route:{fetchAll:function(e,t){return S.Z.get(e,{params:t}).then((function(e){return e.data.data}))},findAll:function(e,t){return S.Z.post(e,{params:t}).then((function(e){return e.data}))},fetchById:function(e,t){return!!t&&S.Z.get("".concat(e,"/").concat(t)).then((function(e){return e.data}))},update:function(e,t){return S.Z.patch("".concat(e,"/"),t).then((function(e){return e.data}))},updateMedia:function(e){return S.Z.patch("media/upload/",e).then((function(e){return e.data}))},remove:function(e,t){return S.Z.patch("".concat(e,"/remove"),t).then((function(e){return e.data}))}},users:{getByID:function(e){return!!e&&S.Z.get(ae.single(e)).then((function(e){return e.data}))}}};function ce(e){var t=JSON.parse(localStorage.getItem("".concat("sagaboilerplate","_user")));if(e||null!=t&&t.token){var r=e||(null==t?void 0:t.token);S.Z.defaults.headers.common.Authorization="Token ".concat(r)}else delete S.Z.defaults.headers.common.Authorization}const ue=oe;function ie(){var e=(0,n.useState)(!1),t=(0,l.Z)(e,2),r=t[0],a=t[1];return(0,n.useLayoutEffect)((function(){var e=function(){var e=window.innerWidth||screen.width;a(e<800)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,n.useLayoutEffect)((function(){var e=void 0===window.navigator?"":navigator.userAgent,t=Boolean(e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i));t||(t=(window.innerWidth||screen.width)<800);a(t)}),[]),{isMobile:r}}const se=function(){var e=(0,n.useRef)();return(0,n.useLayoutEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e};function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe={status:"idle",data:null,error:null};const de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,n.useRef)(pe(pe({},fe),e)),r=(0,n.useReducer)((function(e,t){return pe(pe({},e),t)}),t.current),a=(0,l.Z)(r,2),o=a[0],c=o.data,u=o.status,i=o.error,s=function(e){var t=se();return(0,n.useCallback)((function(){if(t)return e.apply(void 0,arguments)}),[e,t])}(a[1]),p=(0,n.useCallback)((function(e){return s({data:e,status:"resolved"})}),[s]),f=(0,n.useCallback)((function(e){return s({error:e,status:"rejected"})}),[s]),d=(0,n.useCallback)((function(){return s(t.current)}),[s]),v=(0,n.useCallback)((function(e){e&&(s({status:"pending"}),e.then((function(e){return p(e),e}),(function(e){return f(e),e})))}),[s,p,f]);return{data:c,run:v,status:u,error:i,setData:p,setError:f,reset:d,isLoading:"pending"===u,isSuccess:"resolved"===u,isError:"rejected"===u,isIdle:"idle"===u}};var ve=function(e){var t=(0,n.useState)(!1),r=(0,l.Z)(t,2),a=r[0],o=r[1];return(0,n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("".concat("sagaboilerplate","_user")));e.includes(null==t?void 0:t.role)?o(!0):o(!1)}),[e]),a};ve.defaultProps={roles:["admin"]};const he=(0,r(33994).createBrowserHistory)();function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=W();S.Z.defaults.baseURL=me;var we={_id:null,username:!1,email:!1,language:"",lastAction:"",description:!1,address:!1,image:!1,role:!1,userAuth:!1,isTourFinished:!1,registrationTokens:[],notifications:[],notificationsSetting:{pushNotification:!0,emailNotification:!0},lastOpenedApp:""},Oe=function(e,t){return be(be({},e),t)},ye=(0,n.createContext)(),ke=(0,n.createContext)(),xe=function(e){var t=e.children,r={},a=(0,n.useReducer)(Oe,we),o=(0,l.Z)(a,2),c=o[0],u=o[1],i=(0,n.useState)(""),s=(0,l.Z)(i,2),p=s[0],f=s[1],d=(0,n.useState)(!1),v=(0,l.Z)(d,2),h=v[0],g=v[1],b=de(),m=b.isLoading,w=b.isSuccess,O=b.run,y=b.data,k=(ie().isMobile,["/signupparent","/reset","/confirm","/404"]);return r.isPublicPath=(0,n.useCallback)((function(){var e=window.location.pathname;return!!k.some((function(t){return e.includes(t)}))}),[]),r.initUser=(0,n.useCallback)((0,x.Z)(P().mark((function e(){var t;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getLocalUser();case 2:if(!(t=e.sent)){e.next=10;break}localStorage.setItem("logout",!1),f(null==t?void 0:t.token),ce(null==t?void 0:t.token),null!=t&&t._id&&O(ue.users.getByID(null==t?void 0:t._id)),e.next=15;break;case 10:if(!r.isPublicPath()){e.next=14;break}return e.abrupt("return",!1);case 14:he.push("/login");case 15:case"end":return e.stop()}}),e)}))),[he,localStorage]),(0,n.useEffect)((function(){return r.initUser(),function(){h&&clearTimeout(h)}}),[]),(0,n.useEffect)((function(){w&&y&&u(be(be({},c),y))}),[y]),r.addToken=(0,n.useCallback)((function(e){return f(e)}),[]),r.setAutorization=(0,n.useCallback)((function(e){u(be(be({},c),{},{userAuth:!!e})),e&&localStorage.setItem("logout",!1)}),[u,c]),r.isAuthenticated=(0,n.useCallback)((function(){var e=localStorage.getItem("".concat("sagaboilerplate","_user")),t=!1;if(null!==e){var r=JSON.parse(e);t=!(null==r||!r.token)}return t}),[]),r.populateUser=(0,n.useCallback)(function(){var e=(0,x.Z)(P().mark((function e(t){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(be(be({},c),t)),console.debug("WEB - REGISTRATION"),ce(null==t?void 0:t.token),q||(console.debug("Capacitor - REGISTRATION"),B.V1.checkPermissions().then((function(e){"granted"===(null==e?void 0:e.camera)&&"granted"===(null==e?void 0:e.photos)||B.V1.requestPermissions().then((function(e){console.debug("info Camera.requestPermissions: "+JSON.stringify(e))}))})).catch((function(e){return console.log("info Camera Error: "+JSON.stringify(e))})),G(),ne.registerPush(t._id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,q]),r.patchUser=(0,n.useCallback)(function(){var e=(0,x.Z)(P().mark((function e(t){var r;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||!t._id){e.next=7;break}return e.next=3,ue.users.update(t);case 3:(r=e.sent)?u((function(e){return be(be({},e),r)})):console.error("patchUser Error"),e.next=8;break;case 7:console.error('patchUser Error: inside userData don`t have "_id"');case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c]),r.getLocalUser=(0,n.useCallback)((function(){var e=localStorage.getItem("".concat("sagaboilerplate","_user"));return null!==e&&JSON.parse(e)||!1}),[]),r.setCookie=(0,n.useCallback)((function(){document.cookie="for=checkingDailyModal; expires="+date.getTime()+864e5}),[]),r.checkCookie=(0,n.useCallback)((function(){var e=document.cookie.split(";");(e[0].split("=")[1]=(new Date).valueOf()>=new Date(e[1].split("=")[1]).valueOf())&&r.setCookie()}),[]),r.logOut=(0,n.useCallback)((function(){localStorage.setItem("logout",!0),localStorage.removeItem("".concat("sagaboilerplate","_user")),u(we);var e=setTimeout((function(){he.push("/login")}),0);return g(e),!0}),[g]),n.createElement(ye.Provider,{value:be(be(be({},c),r),{},{isLoading:m,isSuccess:w,token:p})},n.createElement(ke.Provider,{value:u},t))};const je=function(e){var t=e.children;return n.createElement(v,null,n.createElement(xe,null,t))};var Pe=r(35809),Se=r(6116),Ze=r(19597),Ee=r(71602),Ce=r(60572),Ae=r.n(Ce),Re=r(32673),De=r.n(Re),Ie=r(81908),Be=r.n(Ie),Ue=r(81226),Le=r.n(Ue),Te=r(95367),Ne=r.n(Te);function _e(e){var t={dispatch:Le(),subscribe:Le(),getState:Le(),replaceReducer:Le(),runSaga:Le(),injectedReducers:Ne(),injectedSagas:Ne()};(0,Ee.Z)(De()(e,t),"(src/store...) injectors: Expected a valid redux store")}function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Me=["@@saga-injector/restart-on-remount",_,V],Je=function(e){return(0,Ee.Z)(Ae()(e)&&!Be()(e),"(src/store...) injectSaga: Expected `key` to be a non empty string")},qe=function(e){var t={saga:Le(),mode:function(e){return Ae()(e)&&Me.includes(e)}};(0,Ee.Z)(De()(e,t),"(src/store...) injectSaga: Expected a valid saga descriptor")};function ze(e,t){return function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;t||_e(e);var o=Fe(Fe({},n),{},{mode:n.mode||_}),c=o.saga,u=o.mode;Je(r),qe(o);var i=Reflect.has(e.injectedSagas,r);(!i||i&&u!==_&&u!==V)&&(e.injectedSagas[r]=Fe(Fe({},o),{},{task:e.runSaga(c,a)}))}}function We(e,t){return function(r){if(t||_e(e),Je(r),Reflect.has(e.injectedSagas,r)){var n=e.injectedSagas[r];n.mode&&n.mode!==_&&(n.task.cancel(),e.injectedSagas[r]="done")}}}var Ge=function(e){var t=e.key,r=e.saga,a=e.mode,o=(0,n.useContext)(c.ReactReduxContext);(0,n.useEffect)((function(){var e=function(e){return _e(e),{injectSaga:ze(e,!0),ejectSaga:We(e,!0)}}(o.store);return e.injectSaga(t,{saga:r,mode:a}),function(){e.ejectSaga(t)}}),[])},He=r(81257),$e="app/App/FLUSH_STATE",Ke={loading:!1,error:!1};const Qe=(0,He.ZP)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke;return(arguments.length>1?arguments[1]:void 0).type===$e?Ke:e}));function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Se.combineReducers)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({global:Qe,router:(0,o.e3)(he)},e));return t}function et(e,t){return function(r,n){t||_e(e),(0,Ee.Z)(Ae()(r)&&!Be()(r)&&Le()(n),"(src/store...) injectReducer: Expected `reducer` to be a reducer function"),Reflect.has(e.injectedReducers,r)&&e.injectedReducers[r]===n||(e.injectedReducers[r]=n,e.replaceReducer(Ye(e.injectedReducers)))}}var tt=function(e){var t=e.key,r=e.reducer,a=(0,n.useContext)(c.ReactReduxContext);(0,n.useEffect)((function(){(function(e){return _e(e),{injectReducer:et(e,!0)}})(a.store).injectReducer(t,r)}),[a.store])},rt=r(4195),nt=r(71698);const at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;Se.compose;var r=(0,nt.ZP)({}),n=[r,(0,o.Bn)(t)],a=(0,Se.configureStore)({reducer:Ye(),middleware:[].concat((0,rt.Z)((0,Se.getDefaultMiddleware)()),n),preloadedState:e,devTools:!1});return a.runSaga=r.run,a.asyncReducers={},a.injectedReducers={},a.injectedSagas={},a};r(27378);var ot=P().mark(ct);function ct(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),ot)}var ut,it,st=function(e){var t;return null!==(t=null==e?void 0:e.global)&&void 0!==t?t:Ke};var lt=(0,Pe.createStructuredSelector)({loading:(0,Pe.createSelector)(st,(function(e){return e.loading})),error:(0,Pe.createSelector)(st,(function(e){return e.error}))});var pt=(0,c.connect)(lt,(function(e){return{dispatch:e,flushState:function(){return e({type:$e})}}}));const ft=(0,Se.compose)(pt,n.memo)((function(e){return e.history,tt({key:"appSaga",reducer:Qe}),Ge({key:"appSaga",saga:ct}),ie().isMobile,n.createElement(n.Fragment,null,ut||(ut=n.createElement(Ze.ql,{titleTemplate:"%s - SagaBoilerplate",defaultTitle:"SagaBoilerplate"},n.createElement("meta",{name:"description",content:"SagaBoilerplate"}),n.createElement("meta",{property:"og:type",content:"website"}),n.createElement("meta",{property:"og:title",content:"SagaBoilerplate"}),n.createElement("meta",{property:"og:description",content:"SagaBoilerplate"}),n.createElement("meta",{property:"og:image",content:""}))),it||(it=n.createElement("div",{id:"top"},"test")))}));r.p,r.p;new(i())("Open Sans",{}).load().then((function(){document.body.classList.add("fontLoaded")}));var dt,vt=at({},he),ht=document.getElementById("app"),gt=a.s(ht);dt=ft,gt.render(n.createElement(n.StrictMode,null,n.createElement(c.Provider,{store:vt},n.createElement(o.DU,{history:he},n.createElement(je,null,n.createElement(dt,{history:he}))))))}},e=>{var t=t=>e(e.s=t);return e.O(0,[103,912,278,794,612,913,341,749,105,183,303,467],(()=>(t(61691),t(40293),t(55718)))),e.O()}])));
//# sourceMappingURL=bundle.7755fd286424cea4d538.js.map